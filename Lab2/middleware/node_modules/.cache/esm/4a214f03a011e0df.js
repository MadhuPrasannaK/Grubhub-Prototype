let express,bodyParser,cors,passport,mongoose,userRoutes,restaurantRoutes,orderRoutes,dishRoutes;_a01‍.w("express",[["default",["express"],function(v){express=v}]]);_a01‍.w("body-parser",[["default",["bodyParser"],function(v){bodyParser=v}]]);_a01‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_a01‍.w("passport",[["default",["passport"],function(v){passport=v}]]);_a01‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);_a01‍.w("./routes/userRoutes",[["default",["userRoutes"],function(v){userRoutes=v}]]);_a01‍.w("./routes/restaurantRoutes",[["default",["restaurantRoutes"],function(v){restaurantRoutes=v}]]);_a01‍.w("./routes/orderRoutes",[["default",["orderRoutes"],function(v){orderRoutes=v}]]);_a01‍.w("./routes/dishRoutes",[["default",["dishRoutes"],function(v){dishRoutes=v}]]);










const app = express();

//DB Connection
mongoose.connect('mongodb+srv://root:root1234@grubhubcluster-7frcc.mongodb.net/test?retryWrites=true&w=majority', {
    useNewUrlParser: true,
    useUnifiedTopology: true, //poolSize: 4
}, (err) => {
    if (err) throw err;
    console.log("Connected to MongoDB")
});

//load configurations for passport
require('./config/passport');

app.use(passport.initialize());
app.use(passport.session());
app.use(cors({
    origin: 'http://localhost:3000',
    credentials: true
}));

app.use(cors());
app.use(bodyParser.json());

app.use(bodyParser.urlencoded({
    extended: true
}));


//Routes
app.use('/', userRoutes);
app.use('/', restaurantRoutes);
app.use('/', dishRoutes)
app.use('/', orderRoutes)

app.listen(3001);
console.log("Grubhub Server listening on port 3001");

module.exports = app;