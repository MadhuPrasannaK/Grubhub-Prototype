let Dishes,Promise,getRestaurantMenu;_375‍.x([["handle_request",()=>handle_request]]);_375‍.w("../../models/dish",[["default",["Dishes"],function(v){Dishes=v}]]);_375‍.w("bluebird",[["default",["Promise"],function(v){Promise=v}]]);_375‍.w("./getMenu",[["*",null,function(v){getRestaurantMenu=v}]]);



const handle_request = (section, callback) => {
    if (!section.dishes || !section.dishes.length) {
        callback({
            message: "No dishes in section."
        }, null)
    }
    return Promise.map(section.dishes, dish => {
        return Dishes.findOne({
            _id: dish
        }).then(currentDish => {
            return currentDish.updateOne({
                section: section.updated_name
            })
        })
    }).then(async () => {
        let restaurantMenu = await getRestaurantMenu.handle_request(section.restaurant_id, null)
        _375‍.g.console.log(restaurantMenu)
        callback(null,
            restaurantMenu
        )
    })
}


